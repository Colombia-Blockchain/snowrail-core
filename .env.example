# =============================================================================
# SNOWRAIL CORE - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# See README.md for detailed setup instructions
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
# Port for the backend API server
PORT=4000

# Node environment (development | production | test)
NODE_ENV=development

# Public API URL (used by frontend and E2E tests)
API_URL=http://localhost:4000

# -----------------------------------------------------------------------------
# BLOCKCHAIN NETWORK
# -----------------------------------------------------------------------------
# Network to use (fuji | avalanche | localhost)
NETWORK=fuji

# Chain ID (43113 for Fuji, 43114 for Mainnet, 31337 for localhost)
CHAIN_ID=43113

# RPC endpoint
# Fuji: https://api.avax-test.network/ext/bc/C/rpc
# Mainnet: https://api.avax.network/ext/bc/C/rpc
RPC_URL=https://api.avax-test.network/ext/bc/C/rpc

# Block explorer URL
# Fuji: https://testnet.snowtrace.io
# Mainnet: https://snowtrace.io
EXPLORER_URL=https://testnet.snowtrace.io

# -----------------------------------------------------------------------------
# WALLET & KEYS
# -----------------------------------------------------------------------------
# Private key for deploying contracts and signing transactions
# ⚠️ NEVER commit this to git! Keep this secret!
# Get testnet AVAX from: https://core.app/tools/testnet-faucet/
PRIVATE_KEY=

# Address to receive payments (optional, defaults to Treasury)
PAY_TO_ADDRESS=

# SENTINEL service private key (for signing validation results)
SENTINEL_PRIVATE_KEY=

# -----------------------------------------------------------------------------
# SMART CONTRACTS
# -----------------------------------------------------------------------------
# Treasury contract address (set after deployment)
TREASURY_CONTRACT_ADDRESS=

# USDC contract address
# Fuji MockUSDC: 0x7435BB56D89Cf26A03fabaE6fA36b66295a2A676
# Mainnet USDC: 0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E
ASSET_ADDRESS=

# Mixer contract address (set after deployment)
MIXER_CONTRACT_ADDRESS=

# Asset name (USDC)
ASSET_NAME=USDC

# -----------------------------------------------------------------------------
# SNOWTRACE API
# -----------------------------------------------------------------------------
# API key for contract verification on Snowtrace
# Get free key at: https://snowtrace.io/myapikey
SNOWTRACE_API_KEY=

# -----------------------------------------------------------------------------
# X402 PAYMENT PROTOCOL
# -----------------------------------------------------------------------------
# Settlement mode (facilitator | direct)
SETTLEMENT_MODE=facilitator

# Facilitator endpoint URL
FACILITATOR_URL=http://localhost:4000/facilitator
X402_FACILITATOR_URL=http://localhost:4000/facilitator

# Service endpoint for payment processing
SERVICE_URL=http://localhost:4000/process

# Payment intent timeout in milliseconds (default: 5 minutes)
X402_TIMEOUT=300000

# -----------------------------------------------------------------------------
# SENTINEL TRUST LAYER
# -----------------------------------------------------------------------------
# Minimum trust score required to allow payment (0-100)
SENTINEL_MIN_SCORE=60

# Enable caching of validation results
SENTINEL_CACHE=true

# Cache TTL in milliseconds (default: 5 minutes)
SENTINEL_CACHE_TTL=300000

# Rate limit for validation requests per minute
SENTINEL_RATE_LIMIT=100

# -----------------------------------------------------------------------------
# YUKI AI ASSISTANT
# -----------------------------------------------------------------------------
# AI provider (anthropic | openai | mock)
# Falls back to mock mode if no API key is provided
AI_PROVIDER=openai

# OpenAI API Key (optional - YUKI works in mock mode without it)
# Get key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic API Key (optional - alternative to OpenAI)
# Get key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# YUKI configuration
YUKI_PROVIDER=anthropic
YUKI_MODEL=claude-sonnet-4-20250514
AI_MODEL=gpt-4o-mini
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=500

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# JWT secret for authentication (change in production!)
JWT_SECRET=snowrail-dev-secret-change-in-production

# JWT token expiration time
JWT_EXPIRES_IN=7d

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# -----------------------------------------------------------------------------
# LOGGING & MONITORING
# -----------------------------------------------------------------------------
# Log level (debug | info | warn | error)
LOG_LEVEL=debug

# Enable detailed request logging
ENABLE_REQUEST_LOGS=true

# -----------------------------------------------------------------------------
# DATABASE (OPTIONAL)
# -----------------------------------------------------------------------------
# SQLite for development (default)
DATABASE_URL=file:./prisma/dev.db

# PostgreSQL for production (uncomment to use)
# DATABASE_URL=postgresql://user:password@host:5432/snowrail

# -----------------------------------------------------------------------------
# OPTIONAL FEATURES
# -----------------------------------------------------------------------------
# Enable merchant API endpoints
MERCHANT_API_ENABLED=false

# Arweave JWK for permanent storage (optional)
# ARWEAVE_JWK=

# -----------------------------------------------------------------------------
# TESTING & DEVELOPMENT
# -----------------------------------------------------------------------------
# Test wallet addresses (for E2E tests)
# TEST_SENDER_ADDRESS=
# TEST_RECIPIENT_ADDRESS=

# Mock mode for testing without real contracts
# MOCK_MODE=false

# =============================================================================
# QUICK START CHECKLIST
# =============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Add your PRIVATE_KEY (get testnet AVAX from faucet)
# 3. Add your SNOWTRACE_API_KEY (optional but recommended)
# 4. Deploy contracts: pnpm contracts:deploy
# 5. Update TREASURY_CONTRACT_ADDRESS, ASSET_ADDRESS, MIXER_CONTRACT_ADDRESS
# 6. Start backend: pnpm backend:dev
# 7. Run E2E test: pnpm e2e
# =============================================================================
